"use strict";function _slicedToArray(t,i){return _arrayWithHoles(t)||_iterableToArrayLimit(t,i)||_unsupportedIterableToArray(t,i)||_nonIterableRest()}function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function _unsupportedIterableToArray(t,i){if(t){if("string"==typeof t)return _arrayLikeToArray(t,i);var e=Object.prototype.toString.call(t).slice(8,-1);return"Object"===e&&t.constructor&&(e=t.constructor.name),"Map"===e||"Set"===e?Array.from(t):"Arguments"===e||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(e)?_arrayLikeToArray(t,i):void 0}}function _arrayLikeToArray(t,i){(null==i||i>t.length)&&(i=t.length);for(var e=0,n=new Array(i);e<i;e++)n[e]=t[e];return n}function _iterableToArrayLimit(t,i){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(t)){var e=[],n=!0,a=!1,s=void 0;try{for(var r,h=t[Symbol.iterator]();!(n=(r=h.next()).done)&&(e.push(r.value),!i||e.length!==i);n=!0);}catch(t){a=!0,s=t}finally{try{n||null==h.return||h.return()}finally{if(a)throw s}}return e}}function _arrayWithHoles(t){if(Array.isArray(t))return t}function pagination(){return{page:1,pagination:5,elements:[],visible:[],initialized:!1,is_expand:!1,is_shrink:!1,has_next:!1,has_previous:!1,animating:!1,default:{page:1,pagination:5,content:"content",navigation:"navigation",item:"pagination__item",animation:"pagination__anim",hidden:"pagination__item--hidden",visible:"pagination__item--visible",lazy:"pagination__lazy",breakpoints:[{width:"768",pagination:"2"},{width:"640",pagination:"1"}]},init:function(t){var i=this;if(void 0!==t)for(var e=0,n=Object.entries(t);e<n.length;e++){var a=_slicedToArray(n[e],2),s=a[0],r=a[1];this.default[s]=r}this.page=this.default.page,this.pagination=this.default.pagination,this.visible=this.getVisibleElements();var h=this.$refs[this.default.content].querySelectorAll("."+this.default.item);0===h.length&&(h=this.$refs[this.default.content].children);for(var o=0;o<h.length;o++)this.visible.includes(o)||h[o].classList.add(this.default.hidden),this.elements.push(h[o]);this.$nextTick((function(){i.checkMaxHeight()})),window.addEventListener("resize",(function(){i.$el.style.setProperty("--".concat(i.default.content,"-height"),""),i.$el.style.setProperty("--".concat(i.default.navigation,"-height"),""),i.checkMaxHeight(),i.checkWindowWidth(),i.defineVisibleElements()})),this.$watch("animating",(function(t){!0===t?(i.is_expand=!1,i.is_shrink=!1,i.has_next=!1,i.has_previous=!1):(i.checkExpand(),i.checkNavigation())})),this.checkExpand(),this.checkNavigation(),this.checkWindowWidth(),this.defineVisibleElements(),this.checkLazyLoading(),this.initialized=!0},getVisibleElements:function(){for(var t=[],i=0;i<this.pagination;i++){var e=(this.page-1)*this.pagination+i;t.push(e)}return t},checkMaxHeight:function(){var t=0;this.elements.forEach((function(i){t<i.offsetHeight&&(t=i.offsetHeight)})),this.$el.style.setProperty("--".concat(this.default.content,"-height"),"".concat(t,"px"));var i=0;void 0!==this.$refs[this.default.navigation]&&(i=this.$refs[this.default.navigation].offsetHeight,this.$el.style.setProperty("--".concat(this.default.navigation,"-height"),"".concat(i,"px")))},checkLazyLoading:function(){var t=this;this.elements.forEach((function(i){for(var e=i.getElementsByTagName("img"),n=function(i){if(void 0===e[i].dataset.src)return"continue";(s=new Image).onload=function(n){e[i].src=e[i].dataset.src,e[i].classList.remove(t.default.lazy)},s.src=e[i].dataset.src},a=0;a<e.length;a++){var s;n(a)}}))},checkWindowWidth:function(){if(!1===this.default.breakpoints)return!1;var t=this.default.breakpoints;t.sort((function(t,i){return parseInt(t.width)>parseInt(i.width)?1:parseInt(i.width)>parseInt(t.width)?-1:0})),this.pagination=this.default.pagination;for(var i=0;i<t.length;i++)if(window.innerWidth<parseInt(t[i].width)){this.pagination=parseInt(t[i].pagination);break}},defineVisibleElements:function(){var t=this;this.visible=this.getVisibleElements(),this.elements.forEach((function(i,e){t.visible.includes(e)?(i.classList.remove(t.default.hidden),i.classList.add(t.default.visible)):(i.classList.add(t.default.hidden),i.classList.remove(t.default.visible))}))},startExpand:function(){var t=this,i=this.visible,e=this.default.animation+"--expand";this.elements.forEach((function(n,a){i.includes(a)||(n.classList.remove(t.default.hidden),n.classList.add(e),t.animating=!0,n.addEventListener("animationend",(function(i){i.target.classList.remove(e),t.animating=!1,t.is_expand=!0,t.is_shrink=!1}),{once:!0}))}))},startShrink:function(){var t=this;this.checkWindowWidth(),this.visible=this.getVisibleElements();var i=this.default.animation+"--shrink",e=0;this.elements.forEach((function(n,a){t.visible.includes(e)||(n.classList.add(i),t.animating=!0,n.addEventListener("animationend",(function(e){t.animationEnd(e.target,"hide",i),t.animating=!1,t.is_shrink=!0,t.is_expand=!1}),{once:!0})),e++}))},startOut:function(t){var i=this,e=this.visible;this.visible=this.getVisibleElements();var n=this.default.animation+"--out-"+t;this.elements.forEach((function(a,s){e.includes(s)&&(i.animating=!0,a.classList.add(n),a.addEventListener("animationend",(function(e){i.animationEnd(e.target,"hide",n),i.animating=!1,i.startIn(t)}),{once:!0}))}))},startIn:function(t){var i=this,e="pagination__anim--in-"+t;this.elements.forEach((function(t,n){i.visible.includes(n)&&(t.classList.remove(i.default.hidden),t.classList.add(e),i.animating=!0,t.addEventListener("animationend",(function(t){i.animating=!1,i.animationEnd(t.target,"show",e)}),{once:!0}))}))},animationEnd:function(t,i,e){t.classList.remove(e),"hide"===i?(t.classList.remove(this.default.visible),t.classList.add(this.default.hidden)):(t.classList.remove(this.default.hidden),t.classList.add(this.default.visible))},checkNavigation:function(){(this.page-1)*this.pagination+this.pagination>=this.elements.length?this.has_next=!1:this.has_next=!0,this.page<=1?this.has_previous=!1:this.has_previous=!0},checkExpand:function(){this.pagination===this.elements.length?(this.is_expand=!0,this.is_shrink=!1):(this.is_expand=!1,this.is_shrink=!0)},next:function(){this.page++,this.startOut("right")},end:function(){this.page=Math.ceil(this.elements.length/this.pagination),this.startOut("right")},previous:function(){this.page--,this.startOut("left")},start:function(){this.page=1,this.startOut("left")},expand:function(){this.page=1,this.pagination=this.elements.length,this.startExpand()},shrink:function(){this.page=1,this.pagination=this.default.pagination,this.startShrink()}}}